[TOC]
## 背景介绍
### 汽车冷却系统
**汽车冷却系统**，是一种用来给汽车发动机进行散热，以防止发动机过热的系统,从而使汽车在所有的工况下都能保持在适当的温度范围内工作。汽车的冷却系统根据冷却介质的不同可以分为风冷和水冷两种。风冷系统即以空气为冷却介质，水冷系统则以冷却液为冷却介质。
汽车水冷系统通常由以下几部分组成：水泵、散热器、冷却风扇、节温器、*补偿水箱*、发动机机体以及缸盖中的水套以及其他附属的装置等。

### 补偿水箱
**补偿水箱**又称“膨胀水箱”，由塑料制造并用软管与散热器加冷却液上的溢流管连接。当散热器中的冷却液受热膨胀时，部分冷却液注入补偿水箱中；而当冷却液降温时，部分冷却液又被吸回散热器中，以此来保证冷却不会因为受热膨胀而溢出流失。补偿水箱内的液面有时升高，有时降低，而散热器却总是为冷却液充满。在补偿水箱的外表面上刻有两条标记线：“MAX”和“MIN”线，补偿水箱内的液面应位于两条标记线之间。若液面低于"MIN"线时，应向水箱内补充冷却液。在向水箱内添加冷却液时，液面不应超过"MAX"线。补偿水箱还可消除水冷系中的所有气泡。

#### 结构
膨胀水箱多用半透明材料(如塑料)制成。透过箱体可直接方便地观察到液面高度，无需打开散热器盖。如图所示，膨胀水箱的上部用一个较细的软管与水箱的加水管相连，底部通过水管与水泵的进水侧相连接，通常位置略高于散热器。 

#### 作用 
1. 使汽车冷却系统形成一个空间封闭的空间，使得冷却液永久性的保存在系统中，减少冷却液的损失；
2. 因为汽车冷却系统形成一个封闭的空间，所以可以防止空气进入到冷却系统中，从而避免冷却系统中的零件被氧化腐蚀；
3. 可以吸收消耗掉汽车冷却系统内部出现的气泡，防止零件的穴蚀，另一方面也可以提高水泵的泵水量；
4. 可以消耗/补偿散热器中冷却液随着温度变化产生增大/减少的体积，从而保持冷却液系统内部的压强保持恒定。

#### 膨胀水箱的作用原理
一般冷却系冷却液的流动是靠水泵的压力来实现的。水泵吸水的一侧压力低，易产生蒸汽泡，使水泵的出水量显著下降，并引起水泵叶轮和水套的穴蚀，在其表面产生麻点或凹坑，缩短了叶轮和水套的使用寿命。加装膨胀水箱后，由于膨胀水箱和水泵进水口之间存在补充水管，使水泵了汽泡的产生。散热器中的蒸汽泡和水套中的蒸汽泡通过导管和进入膨胀水箱，从而使气水彻底分离。由于膨胀水箱温度较低，进入的气体得到冷凝，一部分变成液体，重新进入水泵。而积存在膨胀水箱液面上的气体起缓冲作用，使冷却系内压力保持稳定状态。
#### 一管式膨胀水箱
有的冷却系不用膨胀水箱而使用储液罐。即用一根管子把散热器和储液罐的底部或上部(管口插入液面以下)连通。但这种装置只能解决气水分离及冷却液消耗问题，而对穴蚀没有明显的改善。当冷却液温度升高时，散热器中液体膨胀、汽化，使散热器盖蒸汽阀开启，散热器中的蒸汽或液体沿导管流入储液罐。当冷却水温度降低时，散热器内压力下降，液体沿原路径流向散热器。
在本文中分析的对象就是典型的一管式膨胀水箱，为了分析说明的方便，在文中称之为“汽车水箱”以方便描述，注意与“散热器”作区分。

## 准备工作
Ansys作为一款功能强大的有限元分析软件，它可以来进行结构分析（实体的运动、压力、接触等）、热分析、电磁场分析、液体分析，以及上述各分析类型的耦合场分析。针对于不同的分析类型，Ansys采用不同的单元类型来进行网格划分和计算。在一切工作开始之前，我们要对所要分析的问题进行分析，明确要作什么分析，模拟什么问题，单元类型的采用，最后要得出什么答案。准备工作做得充足将会使后续的工作顺利的开展。
### 分析的问题
本文的目的是分析汽车水箱支架随着U型尺寸不同，应力分布的变化情况，从中找出其规律并从中找出最合适的U型开口尺寸。
汽车水箱主要的支撑是水箱支架，支架通过延伸出来的支撑板托住水箱的底部，另外U型开口嵌入到水箱上的U型连接部分，而支架通过两个圆孔进行固定。水箱在装有冷却液的时候受重力的作用，下压支架使其承受压力，发生压缩和弯曲变形。水箱和支架整体只受重力的作用，是一个典型的静力问题。

### 模拟什么？
Ansys作为一个功能强大的有限元分析软件，它提供了多种不同的单元类型以满足对不同工程问题的分析需求。在进行有限元分析之前，根据求解的问题选择正确、适合的单元类型是非常重要的。单元类型选择的合适与否直接决定了有限元求解的精度和求解过程是否能够顺利进行。
对于静力分析问题，Ansys提供了线单元、壳单元、二维实体单元和三维实体单元几种类型的单元类型，这几种分别适用于不同的分析问题：
1. 线单元：线单元又包含梁单元、杆单元和弹簧单元。其中梁单元适合于螺栓，薄壁管件，C型截面构件，角钢或细长薄膜构件等模型；杆单元适合用来对弹簧、螺杆、预应力螺杆和薄膜桁架等模型进行分析；弹簧单元适用于弹簧螺杆、或细长构件，或通过刚度等效替代复杂结构等模型。
2. 壳单元：壳单元用于薄板或曲面模型。壳单元应用的基本原则是每块面板的主尺寸不低于其厚度的十倍。
3. 二维实体单元：适合用于模拟实体的截面。
4. 三维实体单元：用于那些用于几何、材料、载荷或分析要求考虑细节等原因，造成无法采用更简单单元进行建模的结构。也适用于从三维CAD系统转化过来的几何模型，把它转化成为二维或壳体需要花费大量的时间和精力。
对于汽车水箱，是一个用来贮存汽车冷却系统中的冷却液的部件，是一个典型的壳体结构，同时，汽车水箱支架是一个皈金件结构,两者都是薄壁结构。汽车水箱和支架的壁厚分别为1.5mm和1.4mm，具有“壁薄面大”的特点，满足壳单元使用的基本原则。所以对于二者都采用壳单元来进行分析。理论上用实体单元也是是可以进行分析，但是会使得计算量大大增加。而且如果选择实体单元，薄壁结构受弯矩的时候，如果在厚度方向的单元层数太少，有时候计算结果误差会比较大，反而不如壳单元计算来得准确。 
> **具体哪个单元类型**？
> SHELL181单元说明:  
> SHELL181单元适合对薄的到具有一定厚度的壳体结构进行分析。它是一个4结点单元，每个结点具有6个自由度：x,y,z方向的位移自由度和绕X,Y,Z轴的转动自由度。(如果应用了薄膜选项的话，那该单元则只有移动自由度了)。简并三角形选项只在该单元做为充填单元进行网格划分时才会用到。  
> Shell181单元非常适用于分析线性的，大转动变形和非线性的大形变。壳体厚度的变化是为了适应非线性分析。在该单元的应用范围内，完全积分和降阶积分都是适用的。SHELL181单元阐明了以下（荷载刚度）分布压强的效果。 SHELL181单元可以应用在多层结构的材料，如复合层压壳体或者夹层结构的建模。在复合壳体的建模过程中，其精确度取决于第一剪切形变理论（ 通常指明德林-雷斯那壳体理论）  
> SHELL281:
> 该单元为SHELL181单元的高阶单元，相关的介绍可以参考SHELL181的相关内容。
> 对于薄壁结构，是选实体单元还是壳单元？
> 对于薄壁结构，最好是选用shell单元，shell单元可以减少计算量，如果你非要用实体单元，也是可以的，但是这样计算量就大大增加了。而且，如果选实体单元，薄壁结构承受弯矩的时候，如果在厚度方向的单元层数太少，有时候计算结果误差比较大，反而不如shell单元计算准确。
> 实际工程中常用的shell单元有shell63,shell93。shell63是四节点的shell单元(可以退化为三角形)，shell93是带中间节点的四边形shell单元(可以退化为三角形),shell93单元由于带有中间节点，计算精度比shell63更高，但是由于节点数目比shell63多，计算量会增大。对于一般的问题，选用shell63就足够了。
> 除了shell63，shell93之外，还有很多其他的shell单元，譬如shell91,shell131，shell163等等，这些单元有的是用于多层铺层材料的，有的是用于结构显示动力学分析的，一般新手很少涉及到。通常情况下，shell63单元就够用了。
> shell(板壳)系列
> shell41一般用来模拟膜。
> shell63可针对一般的板壳，注意仅限弹性分析。
> 它的塑性版本是shell43。
> 加强版是shell181（注意18x系列单元都是ansys后开发的单元，考虑了以前单元的优点和缺陷，因而更加完善），优点是：能实现shell41、shell63、shell43...的所有功能并比它们做得更好。
在旧的Ansys版本中，常用的壳单元有shell63，shell93。shell63是四节点的shell单元(可以退化为三角形)，shell93是带中间节点的四边形shell单元(可以退化为三角形)。shell93单元由于带有中间节点，计算精度比shell63更高，但是由于节点数目比shell63多，计算量会增大。对于一般的问题，选用shell63就足够了。而在本文中所使用的是Ansys 14.0版本，在该版本中提供了shell181和shell281两种壳单元，其考虑了以前单元的优点和缺陷，能实现shell63、shell93等单元的所有功能并且做得更好。
shell181单元适合于对薄到中厚的壳体进行分析。该单元为4节点单元，每个节点有6个自由度。而shell281是shell181单元的高阶单元，它能在相同的网格划分密度下得到更高精度的计算，但是其对实体模型的质量要求也更加苛刻，有时候网格划分容易失败。在满足精度要求的情况，采用shell181单元进行分析。

### 网格的密度
> 有限元分析的基本原则是：单元的数目（单元密度）越多，所得的解答越逼近真实解答。
理论上，进行有限元分析计算的时候，划分的网格越细致，单元尺寸越小，得到的的计算结果也更加准确。相应的，网格划分的越细致，求解的计算量也会越大，网格密度增加到一定的程度将会使得求解的时间大大增加而求解精度的提升却微乎其微。所以，权衡求解计算的时间和对于问题需求，应该在满足求解精度度、准确性的情况下尽量减少网格单元的尺寸大小，降低网格密度以求得更短的求解时间以提高工作的效率。
> 不同风格密度的计算比较，精度和时间

## 有限元模型的创建

### 单位的统一
> Ansys没有为系统指定唯一的单位。除了磁场分析外，可以在工程分析中使用任意一种单位制，只是用户在使用过程中要注意保证所有数据使用同一单位即可。因此用户可以根据自己的习惯使用国际单位制或者工程单位制。

### 有限元模型的建模方法
Ansys的广泛应用利益于其方便、直观、有效快捷的建模技术。根据分析模型的外形结构尺寸的难易程度，Ansys的建模可以分为直接建模和间接建模两种方法。
1. 直接建模方法
对于较为简单、小型的模型可以采用直接建模的方法，即先建立节点，然后根据节点创建有限元分析的单元。采用这种方法可以保证对有限元模型中的第一节点的位置和单元的形状进行完全的控制，但是对于非简单模型的话需要手工的处理第一个节点和单元将带来很大的工作量，也更容易出错。当对分析结果不满意想对网格进一步细化以提高精度的时候，则要插入更多的节点，重新生成单元，分析效率效率将大大的降低。此外对于参数化分析，需对模型的尺寸进行调整，重复有限元模型创建过程，采用此方法不便于分析。
2. 间接建模方法
对于比较复杂，庞大的模型则采用间接建模方法。即先生成实体模型，再对实体模型进行网格划分得到节点和单元，生成相应有限元模型。相对于直接建模的方法，此方法不需要对第一个节点和单元进行设置，需要处理的数据量比较少，同时也方便对有限元模型进行调整、更改。但是有时候模型过于复杂会造成网格划分失败或者划分出来的网格质量差，同时模型太复杂庞大也会增加CPU处理的时间。

本文中的分析对象包括汽车水箱和汽车水箱支架，两者的形状都较为复杂，要得到比较好的分析结果需要有比较细致的有限元模型，由此节点和单元的数量将是非常庞大的，所以采用直接建模的方法得到有限元模型几乎是不可能的。为了减少建模的工作量，提高分析的效率更适合采用间接建模的方法，同时也方便对模型尺寸进行调整以进行参数分析。

### 实体模型

#### 实体模型建模方法
在Ansys中的实体模型是由点、线、面和体组成的几何模型。利用Ansys进行实体建模有自底向上和自顶向下两张方式。所谓自底向上就是先定义关键点，再由关键点创建线，由线构造面，由面创造体的一个从低级图元到高级图元的过程。自顶向下的方式则相反，是一个从高级图元到低级图元的过程，当创建了高级图元会自动地生成相对应的低级图元。对于较为复杂的实体模型不能直接从实体工具直接生成，Ansys提供了强大的Boolean运算（如Add，Subtract，Overlap等）工具，可以生成复杂的几何模型，此外还有旋转，拉伸，复制等操作。
Ansys是一个专业的有限元分析软件，在实体建模方面功能没有专业的CAD软件强大，所以Ansys还提供了与其他CAD系统输入输出的强大接口，方便于从外部CAD系统建立实体后导入到Ansys中。导入到Ansys中的实体只要（甚至不用）进行一点改动就可以用于网格划分。
本文中的分析的汽车水箱形状外表较为复杂，如果在Ansys中直接进行有实体建模的话相对困难，所以采用先在Proe中创建实体模型，再利用Ansys和Proe之间的接口将创建好的实体模型导入到Ansys中，然后根据有限元分析计算的要求对实体模型再做进一步的处理。由于采用了Ansys的产品接口，可以使得Ansys读入“原始”的CAD文件，避免其他一些导入方式存在的问题。

#### 实体模型的简化
> 实体模型体现了实际问题的几何特征，合理的创建实体模型可以更好地反映实际问题并能简化有限元计算。（P96）
有限元分析的过程分为前处理、求解和后处理三部分，其中实体模型的创建包含于前处理当中。实体模型的建立服务于风格划分，经过风格划分后得到用于有限元求解的有限元模型，即节点和单元。网格划分的过程是一个用节点和单元“填充”实体模型的过程，是一个根据实体模型创建有限元模型的过程，只有进行有限元求解的时候才用到节点和单元，实体模型不需要。也就是说有限元求解需要的是有限元模型（即节点和单元），而非实体模型，实体模型的存在只是为划分风格得到有限元模型而存在。
实体模型的质量的好坏直接决定了网格划分的难易程度和网格的质量，这里所说的质量好坏并不是说实体模型对实际模型的尺寸、形状、细节等几何特征的复原程度。正如上文的说明的，我们要明确在Ansys中创建实体模型是为了划分网格从而得到有限元模型，质量好的实体模型应该是要能反映实际问题，方便于网格划分，易得到质量好的网格又能简化有限计算计算满足工程使用要求的。
本文中分析的是汽车水箱U型开口尺寸对于支架应力分布的影响，所以关注点在于水箱支架，如果对支架进行简化的话很有可能造成计算结果的明显偏差，考虑到计算精度的要求，对于支架不易于进行细节的简化。另一方面， 由于水箱形状较为复杂，有便于分析计算，在不影响有限元分析要求的甚而可以从细节和结构两个方面对实体模型进行简化以便于后续工作的进行。

##### 细节的简化
> 可以简化的地方及前后对比

##### 结构的简化
> 可以简化的地方及前后对比

#### 几何模型的导入
> 安装Ansys时建立与Proe之间的接口
> 导入

#### 几何模型的再次处理

#### 划分网格

#### 单元属性设置

##### 单元类型
单元类型的设置决定材料的自由度（DOF），单元形状，维数和假定的位移形函数。

###### 单元的选择

##### 单元参数设置
###### 材料性质
##### 厚度

#### 指定网格控制

#### 生成网格

#### 加载
> 水箱密度
> 重力的施加

#### 定义边界条件

## 结果描述

## 讨论分析

## 结论

